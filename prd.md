# Product Requirements Document: StarsCalendars - Spiritual Astronomy Platform

## 1. Purpose

### Background

Проект StarsCalendars возник из потребности в создании уникальной платформы для духовных искателей, объединяющей высокоточные астрономические вычисления с эзотерическими знаниями. Основная мотивация заключается в том, что существующие приложения не предоставляют комплексного подхода к духовной астрономии, астрологическим практикам и культурным адаптациям для глобального духовного сообщества в единой интерактивной платформе.

Ключевые факторы, подтолкнувшие к разработке:
- Отсутствие веб-приложений с высокоточными астрономическими расчетами для духовных практик
- Потребность в кинематографической 3D-визуализации небесных тел для медитативных целей
- Необходимость интеграции духовных практик с современными технологиями
- Требования к многоязычной поддержке (10 языков) для глобального духовного сообщества
- Потребность в Telegram-интеграции для духовного сообщества с проверкой подписок

### Business & Product Goals

**Количественные цели:**
- Достижение точности астрономических расчетов с использованием saurvs/astro-rust
- Обеспечение стабильной частоты кадров 60 FPS при 3D-рендеринге для кинематографического качества
- Поддержка одновременной работы до 10,000 духовных искателей
- Время загрузки приложения менее 3 секунд для мгновенного доступа к духовным практикам
- Поддержка 10 языков с загрузкой <200ms и переключением <100ms

**Качественные цели:**
- Создание интуитивно понятного интерфейса для духовных и эзотерических практик
- Обеспечение плавного пользовательского опыта для медитативных сессий
- Интеграция системы подписок через Telegram для духовного сообщества
- Создание масштабируемой архитектуры для расширения духовных функций
- Многоязычная поддержка с культурными адаптациями для глобального сообщества

**Границы проекта:**
- НЕ включает мобильные приложения (только веб-версия)
- НЕ включает VR/AR функциональность на первом этапе (архитектура VR-ready)
- НЕ включает расчеты для других планет кроме Земли и Луны на первом этапе
- НЕ включает многопользовательские функции на первом этапе

## 2. Customer & Value

### Customer Segment

**Основная целевая аудитория:**
- Духовные искатели и практики (25-55 лет)
- Астрологи и эзотерики
- Медитаторы и йоги
- Исследователи квантовых практик
- Люди, интересующиеся духовным развитием и самопознанием
- Преподаватели духовных практик и эзотерических наук

**Характеристики пользователей:**
- Интересуются духовными практиками и эзотерическими знаниями
- Ценят точность астрологических и лунных расчетов
- Готовы инвестировать в духовное развитие
- Активно используют социальные платформы (Telegram) для духовного сообщества
- Ищут современные технологии для древних практик

**Текущие способы удовлетворения потребностей:**
- Использование традиционных астрологических календарей
- Мобильные приложения с базовыми лунными фазами
- Веб-сайты с астрологическими расчетами
- Физические книги и календари для духовных практик

### Market & Business Analysis

**Объем рынка:**
- Глобальный рынок духовных и эзотерических приложений: $3.2 млрд
- Сегмент астрологических и лунных календарей: $800 млн
- Целевая аудитория: ~15 млн активных духовных искателей

**Экономическая модель:**
- Freemium модель с базовым доступом к лунным фазам бесплатно
- Премиум-подписка через Telegram-канал: $8-20/месяц
- Корпоративные лицензии для духовных центров и школ
- API для разработчиков духовных приложений: $100-300/месяц

**Точка безубыточности:** 1500 платных подписчиков при ARPU $15/месяц

**Рыночные тренды:**
- Рост интереса к духовным практикам и самопознанию
- Развитие квантовых технологий и их применение в духовных практиках
- Популяризация медитации и осознанности
- Интеграция древних знаний с современными технологиями

### Proposal & Value Propositions

**Основные ценностные предложения:**

1. **Высокоточная астрономическая платформа для духовных практик**
   - Точнейшие астрономические расчеты с использованием saurvs/astro-rust
   - Высокоточные лунные и астрологические вычисления в реальном времени
   - Интеграция древних знаний с современными технологиями
   - Персонализированные духовные рекомендации на основе астрономических данных

2. **Кинематографическая 3D-визуализация небесных тел**
   - Полноэкранная 3D-сцена с Babylon.js 8 кинематографического качества
   - Солнце статично в центре сцены (0,0,0) как центральное светило
   - Динамическое обновление положений Земли и Луны каждый кадр
   - Художественные пропорции размеров и расстояний для кинематографического качества
   - Реалистичное освещение небесных тел с полным отражением реальных положений

3. **Многоязычная духовная веб-платформа**
   - Поддержка 10 языков с культурными адаптациями
   - RTL поддержка для арабского языка
   - Работа в любом современном браузере
   - Не требует установки дополнительного ПО
   - Кроссплатформенность для глобального духовного сообщества

4. **Telegram-интеграция для духовного сообщества**
   - Telegram-only аутентификация с проверкой подписок
   - UUID токены для безопасной привязки аккаунтов
   - Автоматическая проверка статуса подписки через getChatMember
   - Социальные функции для духовного сообщества
   - Уведомления о важных духовных событиях

### Risk Assumptions

**Критические риски:**

1. **Производительность астрономических расчетов**
   - *Риск:* WASM может не обеспечить требуемую производительность для точных астрономических вычислений
   - *Эксперимент:* Прототип с saurvs/astro-rust и профилированием производительности

2. **Принятие глобальным духовным сообществом**
   - *Риск:* Духовные искатели могут предпочесть традиционные методы
   - *Эксперимент:* A/B тестирование с существующими духовными приложениями

3. **Техническая сложность интеграции**
   - *Риск:* Сложность интеграции Babylon.js, Rust WASM и Axum для духовных практик
   - *Эксперимент:* Поэтапная разработка с MVP на каждом этапе

4. **Многоязычная локализация**
   - *Риск:* Сложность поддержки 10 языков с культурными адаптациями
   - *Эксперимент:* Прототип с Fluent (ICU MessageFormat) для ключевых языков

5. **Telegram-интеграция**
   - *Риск:* Сложность реализации Telegram-only аутентификации
   - *Эксперимент:* Прототип с Teloxide и проверкой подписок

## 3. Solution

### Solution

**Архитектура решения:**

**Фронтенд (Основная сцена):**
- Babylon.js 8 для кинематографического 3D-рендеринга небесных тел
- Чистый TypeScript с Vite для сборки
- HTML/CSS overlay для GUI (приоритет производительности)
- WebAssembly модуль для точнейших астрономических вычислений с saurvs/astro-rust

**Бэкенд:**
- Axum (Rust) для высокопроизводительного сервера
- PostgreSQL для хранения пользовательских данных и духовных настроек
- WebSockets для связи в реальном времени
- Telegram Bot API для проверки подписок духовного сообщества

**Модуль аутентификации:**
- Dioxus WASM для личных кабинетов духовных практик
- JWT RS256 для безопасной аутентификации
- Telegram-only аутентификация с UUID токенами

**Многоязычная система:**
- Fluent (ICU MessageFormat) для локализации
- Поддержка 10 языков с культурными адаптациями
- RTL поддержка для арабского языка
- Кроссплатформенная синхронизация: Dioxus ↔ Babylon.js ↔ HTML overlay

**Ключевые особенности:**
- Солнце статично в центре сцены (0,0,0) как центральное светило
- Динамическое обновление положений Земли и Луны каждый кадр с точнейшими расчетами
- Thread-local буферы в WASM для нулевого копирования данных
- Float64Array view на WebAssembly.Memory для производительности
- Художественные пропорции размеров и расстояний для кинематографического качества
- Реалистичное освещение небесных тел с полным отражением реальных положений
- Условное отображение функций для авторизованных пользователей
- WebSocket протокол с JWT как первым сообщением
- Dioxus Server Functions для типобезопасного RPC

### Project Plan

**Этапы разработки:**

**Этап 1: MVP (2-3 месяца)**
- Базовая 3D-сцена с Babylon.js кинематографического качества
- Точнейшие астрономические вычисления с saurvs/astro-rust в WASM
- Базовая аутентификация для духовного сообщества
- Статическое отображение Земли и Луны с художественными пропорциями
- Поддержка 5 основных языков (Tier 1-2)

**Этап 2: Основной функционал (3-4 месяца)**
- Динамическое обновление положений Земли и Луны каждый кадр
- Интеграция с Telegram для духовного сообщества
- Система подписок с проверкой через getChatMember
- Оптимизация производительности для кинематографического качества
- Полная поддержка 10 языков с культурными адаптациями

**Этап 3: Полировка (1-2 месяца)**
- UI/UX улучшения для кинематографического опыта
- Тестирование и отладка точности астрономических расчетов
- Документация астрономических и духовных функций
- Подготовка к запуску для глобального духовного сообщества

**Ключевые риски проекта:**
- Сложность интеграции технологий → Поэтапная разработка с MVP
- Производительность → Раннее профилирование и оптимизация для духовных практик
- Безопасность → Тщательное тестирование аутентификации духовного сообщества
- Многоязычность → Поэтапная локализация с приоритетными языками
- Telegram-интеграция → Прототипирование с Teloxide

**Ресурсы:**
- Команда: 3-4 разработчика (Rust, TypeScript, DevOps) + консультант по духовным практикам
- Инфраструктура: VPS/Cloud для разработки и тестирования
- Внешние API: Telegram Bot API, PostgreSQL
- Экспертиза: Консультации с астрологами и духовными практиками

**Критерии запуска:**
- Стабильная работа на 60 FPS для кинематографического качества
- Точнейшие астрономические расчеты с saurvs/astro-rust
- Успешная интеграция с Telegram для духовного сообщества
- Безопасная аутентификация с JWT RS256
- Поддержка 10 языков с культурными адаптациями
- Положительные отзывы от бета-тестеров из глобального духовного сообщества

## 4. Execution

### Launch Strategy

**Ранние последователи:**
- Духовные искатели в Telegram-каналах по астрологии и эзотерике
- Астрологи и эзотерики
- Преподаватели духовных практик
- Медитаторы и йоги
- Студенты духовных школ и практик
- Глобальное духовное сообщество (10 языков)

**Каналы привлечения:**
- Telegram-каналы по астрологии, эзотерике и духовным практикам
- Духовные центры и школы
- Астрологические и эзотерические форумы
- Сообщества медитаторов и йогов
- Многоязычные духовные сообщества

**Процесс онбординга:**
1. Бесплатный доступ к базовым лунным фазам
2. Демонстрация точности астрономических расчетов с saurvs/astro-rust
3. Предложение подписки через Telegram для духовных практик
4. Постепенное открытие премиум-функций для духовного развития
5. Многоязычная поддержка с культурными адаптациями

**Операционные изменения:**
- Поддержка: Духовная поддержка через Telegram и email
- Продажи: Автоматизированные через Telegram-бот для духовного сообщества
- Разработка: Непрерывная интеграция и развертывание с учетом духовных потребностей

### Post-Launch Plan

**При достижении целей:**
- Расширение функциональности (другие планеты, VR для духовных практик)
- Мобильные приложения для духовных искателей
- API для разработчиков духовных приложений
- Корпоративные решения для духовных центров и школ
- Расширение языковой поддержки (дополнительные языки)

**При недостижении целей:**
- Анализ метрик и обратной связи от глобального духовного сообщества
- Итеративная доработка продукта с учетом духовных потребностей
- Возможный пивот в сторону специализированной астрономической платформы
- Рассмотрение альтернативных моделей монетизации для духовного сообщества
- Оптимизация многоязычной поддержки на основе пользовательской обратной связи

---

**Технические детали реализации:**

**Монорепозиторий структура:**
```
starscalendars/
├── frontend/          # TypeScript + Babylon.js для кинематографического рендеринга
├── backend/           # Axum + PostgreSQL для духовного сообщества
├── wasm-astro/        # Rust WASM модуль для точнейших астрономических расчетов
├── dioxus-app/        # Dioxus WASM аутентификация для духовных практик
└── libs/
    ├── domain/        # Чистые типы и бизнес-правила
    ├── app/           # Use-cases, портовые интерфейсы
    └── infra/         # Клиенты PostgreSQL/Telegram/Cache
```

**Ключевые технологии:**
- Babylon.js 8 для кинематографического 3D-рендеринга небесных тел
- Rust + WebAssembly для точнейших астрономических вычислений с saurvs/astro-rust
- Axum для бэкенда духовного сообщества
- PostgreSQL для данных духовных практик
- Dioxus для UI модулей духовных практик
- Telegram Bot API для духовных подписок
- Fluent (ICU MessageFormat) для многоязычной поддержки

**Метрики успеха:**
- Время загрузки < 3 секунд для кинематографического опыта
- Стабильные 60 FPS для кинематографического качества
- Точнейшие астрономические расчеты с saurvs/astro-rust
- Поддержка 10 языков с загрузкой <200ms
- Конверсия в платные подписки > 5% для духовного сообщества
- Удержание пользователей > 70% среди духовных искателей
- 99.9% uptime для production духовного сообщества 